---
import Layout from "@/layouts/Layout.astro";
import Button from "../ui/button/button.astro";
import { useTranslations, getLocalizedUrl } from "@/lib/i18n";
import type { Locale } from "@/i18n/routes";

const { lang } = Astro.props as {
  lang: Locale;
};

const t = useTranslations(lang);
---

<Layout
  title={t("seo.pages.404.title")}
  description={t("seo.pages.404.description")}
>
  <div
    data-scroll-animated
    class="bg-background sticky top-0 z-10 ml-[calc(50%-50vw)] h-28 w-screen"
  >
  </div>
  <div
    class="mx-auto flex h-[80vh] max-w-4xl flex-col justify-center px-20 pb-24 md:w-4/5"
  >
    <h1>{t("notfound.title")}</h1>
    <div class="mt-12 flex flex-col gap-4">
      {t("notfound.message")}
      <Button class="ml-auto" href={getLocalizedUrl("home", lang)}>
        {t("notfound.button")}
      </Button>
    </div>
  </div>
</Layout>

<script>
  function track404() {
    if (window.plausible) {
      window.plausible("404");
    }
  }

  // Track on initial load
  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", track404, { once: true });
  } else {
    track404();
  }

  // Track on client-side navigation
  document.addEventListener("astro:page-load", track404);
</script>
