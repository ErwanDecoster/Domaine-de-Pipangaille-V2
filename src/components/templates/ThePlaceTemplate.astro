---
import Layout from "@/layouts/Layout.astro";
import Header from "@/components/Header.astro";
import MediaContent from "@/components/MediaContent.astro";
import { useTranslations, getLocalizedUrl } from "@/lib/i18n";
import { reviews } from "@/constants/reviews";
import { SCHEMA_CONFIG } from "@/constants/schemaConfig";
import {
  generateLocalizedBreadcrumbList,
  generateLocalizedPlaceSchema,
} from "@/lib/schemaHelpers";
import poolLoungers from "@/images/pool-loungers.jpeg";
import courtyardCornerConcert from "@/images/courtyard-corner-concert.jpeg";
import pavilionTerraceEvening from "@/images/pavilion-terrace-evening.jpeg";
import carportsWedding from "@/images/carports-wedding.webp";
import gardenTerrace from "@/images/garden-terrace.jpeg";
import pool from "@/images/pool.jpeg";
import courtyardTerraceCorner from "@/images/courtyard-terrace-corner.jpeg";

const { lang } = Astro.props as { lang: keyof typeof reviews };
const t = useTranslations(lang);

const breadcrumbSchema = generateLocalizedBreadcrumbList(
  lang as "fr" | "en" | "de" | "es" | "it" | "nl",
  [
    { name: "home", path: getLocalizedUrl("home", lang) },
    { name: "place", path: getLocalizedUrl("place", lang) },
  ],
);

const siteUrl = SCHEMA_CONFIG.site.url;
const placeImages = [
  `${siteUrl}${poolLoungers.src}`,
  `${siteUrl}${courtyardCornerConcert.src}`,
  `${siteUrl}${pavilionTerraceEvening.src}`,
  `${siteUrl}${gardenTerrace.src}`,
];
const placeSchema = generateLocalizedPlaceSchema(
  lang as "fr" | "en" | "de" | "es" | "it" | "nl",
  placeImages,
);
---

<Layout
  title={t("seo.pages.place.title")}
  description={t("seo.pages.place.description")}
  ogImage="/og/place.jpg"
  additionalSchemas={[placeSchema, breadcrumbSchema]}
>
  <div
    data-scroll-animated
    class="bg-muted sticky top-0 z-10 ml-[calc(50%-50vw)] h-28 w-screen"
  >
  </div>
  <Header
    title={t("place.header.title")}
    text={t("place.header.text")}
    image={poolLoungers}
    imageAlt={t("place.header.imageAlt")}
    buttonText={t("place.header.button")}
    buttonLink={getLocalizedUrl("booking", lang)}
    buttonVariant="secondary"
  />
  <div
    data-scroll-animated
    class="bg-background sticky top-0 z-10 -mb-20 ml-[calc(50%-50vw)] h-28 w-screen"
  >
  </div>
  <MediaContent
    direction="left"
    title={t("place.services.title")}
    text={t("place.services.text")}
    image={gardenTerrace}
    images={[
      { src: gardenTerrace, alt: t("place.services.imageAlt") },
      { src: pool, alt: t("place.services.image2Alt") },
      { src: courtyardTerraceCorner, alt: t("place.services.image3Alt") },
    ]}
    imageAlt={t("place.services.imageAlt")}
  />
  <MediaContent
    title={t("place.events.title")}
    text={t("place.events.text")}
    images={[
      { src: courtyardCornerConcert, alt: t("place.events.gallery.image1Alt") },
      { src: pavilionTerraceEvening, alt: t("place.events.gallery.image2Alt") },
      { src: carportsWedding, alt: t("place.events.gallery.image3Alt") },
    ]}
    buttonText={t("place.events.button")}
    buttonLink={getLocalizedUrl("contact", lang)}
  />
  <section class="my-24 px-4 sm:px-6 md:my-48 md:px-10 lg:px-20">
    <h2>{t("place.spotlight.title")}</h2>
  </section>
</Layout>
