---
import { Facebook, Instagram, Linkedin } from "@lucide/astro";

type Props = {
  platform: string;
  class?: string;
};

const { platform, class: className = "" } = Astro.props as Props;
const normalizedPlatform = platform?.toLowerCase() ?? "";

const iconComponents = {
  facebook: Facebook,
  instagram: Instagram,
  linkedin: Linkedin,
} as const;

const vectorIcons: Record<string, string> = {
  x: "M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z",
};

const IconComponent =
  iconComponents[normalizedPlatform as keyof typeof iconComponents];
const vectorPath = vectorIcons[normalizedPlatform];
const classes = ["inline-block", "text-current", className]
  .filter(Boolean)
  .join(" ");
---

{
  IconComponent ? (
    <IconComponent class={classes} aria-hidden="true" focusable="false" />
  ) : vectorPath ? (
    <svg
      class={classes}
      viewBox="0 0 24 24"
      fill="currentColor"
      aria-hidden="true"
      focusable="false"
    >
      <path d={vectorPath} />
    </svg>
  ) : (
    <span class={classes} aria-hidden="true">
      {platform?.slice(0, 1)?.toUpperCase()}
    </span>
  )
}
